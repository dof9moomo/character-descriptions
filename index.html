<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Character Description</title>
<!-- EmailJS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<style>
/* ====== حافظنا على كل التنسيقات القديمة كما هي ====== */
* {margin:0; padding:0; box-sizing:border-box; font-family:'Courier New', monospace;}
body {font-family:'Arial', sans-serif; background-image: url('data:image/jpeg;base64,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'); background-size: cover; background-position: center; background-repeat: no-repeat; background-attachment: fixed; min-height: 100vh; display: flex; justify-content: center; align-items: center; overflow-x: hidden;}
.container {width:100%; max-width:800px; padding:20px;}
/* Start Page Styles */
.start-page {background:black; border-radius:20px; padding:60px 40px; text-align:center; box-shadow:0 20px 40px rgba(0,0,0,0.1); backdrop-filter:blur(10px); transition: all 0.5s ease; position: relative;}
.pixel-title {font-family:'Courier New', monospace; font-size:4rem; color:white; text-shadow:0 0 10px rgba(255,255,255,0.5); filter:blur(1px); transform: perspective(500px) rotateX(15deg); margin-bottom:40px; animation: titleFloat 3s ease-in-out infinite; letter-spacing:3px; font-weight:bold;}
@keyframes titleFloat {0%,100%{transform: perspective(500px) rotateX(15deg) translateY(0px);} 50%{transform: perspective(500px) rotateX(15deg) translateY(-10px);}}
.start-button {background:transparent; color:transparent; border:none; padding:0; font-size:2rem; cursor:pointer; transition: all 0.3s ease; position: relative; width:120px; height:120px; display:inline-flex; align-items:center; justify-content:center;}
.start-button::before {content:"✦"; position:absolute; font-size:8rem; color:rgba(64,64,64,0.8); z-index:1;}
.start-button-text {font-family:'Courier New', monospace; font-size:1.5rem; font-weight:bold; position:absolute; z-index:2; background:linear-gradient(to bottom, #4a4a4a 50%, #2a2a2a 50%); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; letter-spacing:1px;}
.start-button:hover {transform:scale(1.1);}
.start-button:hover::before {color: rgba(80,80,80,1);}
.writing-page {display:none; background: rgba(255,255,255,0.95); border-radius:20px; padding:40px; box-shadow:0 20px 40px rgba(0,0,0,0.1); backdrop-filter:blur(10px); position: relative;}
.floating-container {height:80px; margin-bottom:20px; overflow:hidden; position:relative;}
.floating-box {position:absolute; width:50px; height:50px; background:linear-gradient(45deg,#ff6b6b,#feca57); border-radius:10px; top:15px; right:-60px; animation: floatMove 4s linear infinite; box-shadow:0 5px 15px rgba(0,0,0,0.2);}
.floating-box:nth-child(2) {animation-delay:1.33s;} .floating-box:nth-child(3) {animation-delay:2.66s;}
@keyframes floatMove {0%{right:-60px; transform:rotate(90deg); opacity:1;} 50%{transform:rotate(0deg);} 100%{right:calc(100%+60px); transform:rotate(90deg); opacity:0;}}
.text-container {margin-bottom:20px;}
textarea {width:100%; height:300px; padding:20px; border:2px solid #e0e0e0; border-radius:15px; font-size:16px; font-family:inherit; resize:vertical; min-height:200px; max-height:500px; transition:border-color 0.3s ease;}
textarea:focus {outline:none; border-color:#667eea; box-shadow:0 0 0 3px rgba(102,126,234,0.1);}
.char-counter {text-align:right; color:#666; font-size:14px; margin-top:5px;}
.char-counter.warning {color:#ff4d4f; font-weight:bold;}
button {margin-top:15px; padding:15px 30px; font-size:18px; border:none; border-radius:10px; background:#667eea; color:white; cursor:pointer; transition: all 0.3s ease;}
button:hover {background:#556cd6; transform:scale(1.05);}
#adminPanel {margin-top:40px; border:2px solid #ccc; padding:20px; border-radius:15px; display:none; background:#f0f0f0;}
#adminMessages {max-height:300px; overflow-y:auto;}
.admin-message {border-bottom:1px solid #ccc; padding:5px 0;}
</style>
</head>
<body>
<div class="container">
  <!-- Start Page -->
  <div class="start-page" id="startPage">
    <div class="pixel-title">Character Creator</div>
    <button class="start-button" id="startButton"><span class="start-button-text">Start</span></button>
  </div>

  <!-- Writing Page -->
  <div class="writing-page" id="writingPage">
    <div class="floating-container">
      <div class="floating-box"></div>
      <div class="floating-box"></div>
      <div class="floating-box"></div>
    </div>
    <div class="text-container">
      <textarea id="description" placeholder="Write your character description..."></textarea>
      <div class="char-counter" id="charCounter">0 / 1000</div>
    </div>
    <button id="sendButton">Send to Admin</button>

    <div id="adminPanel">
      <h3>Admin Messages:</h3>
      <div id="adminMessages"></div>
    </div>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<script>
// ======= Firebase Configuration =======
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// ======= Start Page =======
const startPage = document.getElementById('startPage');
const startButton = document.getElementById('startButton');
const writingPage = document.getElementById('writingPage');

startButton.addEventListener('click', () => {
  startPage.style.display = 'none';
  writingPage.style.display = 'block';
});

// ======= Character Counter =======
const description = document.getElementById('description');
const charCounter = document.getElementById('charCounter');
description.addEventListener('input', () => {
  const len = description.value.length;
  charCounter.textContent = `${len} / 1000`;
  if(len > 1000) charCounter.classList.add('warning'); else charCounter.classList.remove('warning');
});

// ======= Send Description to Firebase =======
const sendButton = document.getElementById('sendButton');
sendButton.addEventListener('click', sendDescription);

function sendDescription(){
  const text = description.value.trim();
  if(text.length === 0){ alert("Please write something."); return; }
  const newRef = database.ref('descriptions').push();
  newRef.set({text: text, timestamp: Date.now()})
    .then(()=>{ alert("Sent!"); description.value=""; charCounter.textContent="0 / 1000"; loadAdminMessages(); })
    .catch(err=>console.error(err));
}

// ======= Load Messages for Admin =======
function loadAdminMessages(){
  const adminMessages = document.getElementById('adminMessages');
  adminMessages.innerHTML = "";
  database.ref('descriptions').orderByChild('timestamp').once('value', snapshot => {
    snapshot.forEach(childSnap=>{
      const msgDiv = document.createElement('div');
      msgDiv.className = 'admin-message';
      msgDiv.textContent = childSnap.val().text;
      adminMessages.appendChild(msgDiv);
    });
    document.getElementById('adminPanel').style.display = 'block';
  });
}
</script>
</body>
</html>
